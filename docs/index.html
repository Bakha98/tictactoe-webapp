<!doctype html>
<html lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>–ö—Ä–µ—Å—Ç–∏–∫–∏-–ù–æ–ª–∏–∫–∏ ‚Ä¢ WebApp</title>

  <link rel="stylesheet" href="./styles.css">
  <link id="themeLink" rel="stylesheet" href="./theme-default.css">
</head>
<body>
  <div id="app">
    <header class="app-header">
      <div class="brand"><span class="logo">‚úñÔ∏é‚óØ</span><span class="title">–ö—Ä–µ—Å—Ç–∏–∫–∏-–ù–æ–ª–∏–∫–∏</span></div>
      <div class="controls">
        <select id="mode">
          <option value="pvp">üë• –ò–≥—Ä–æ–∫ vs –ò–≥—Ä–æ–∫</option>
          <option value="ai_easy">ü§ñ –õ—ë–≥–∫–∏–π –ò–ò</option>
          <option value="ai_medium">üß† –°—Ä–µ–¥–Ω–∏–π –ò–ò</option>
          <option value="ai_hard">üî• –°–∏–ª—å–Ω—ã–π –ò–ò</option>
        </select>
        <select id="themeSelect" title="–¢–µ–º–∞">
          <option value="default">üé® Default</option>
          <option value="neon">‚ö° Neon</option>
          <option value="ocean">üåä Ocean</option>
          <option value="sunset">üåá Sunset</option>
          <option value="matrix">üü© Matrix</option>
        </select>
        <button id="reset" class="btn">‚Ü∫ –°–±—Ä–æ—Å</button>
      </div>
    </header>

    <main class="board-wrap">
      <div id="status" class="status">–•–æ–¥: <b>X</b></div>
      <div id="board" class="board" role="grid" aria-label="–ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ 3 –Ω–∞ 3"></div>
      <section class="score">
        <div class="card">
          <div class="card-title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
          <div class="score-row"><span>X –ø–æ–±–µ–¥</span><b id="xWins">0</b></div>
          <div class="score-row"><span>O –ø–æ–±–µ–¥</span><b id="oWins">0</b></div>
          <div class="score-row"><span>–ù–∏—á—å–∏</span><b id="draws">0</b></div>
        </div>
        <div class="card tips">
          <div class="card-title">–ü–æ–¥—Å–∫–∞–∑–∫–∏</div>
          <ul>
            <li>–í—ã–±–∏—Ä–∞–π —Ç–µ–º—É ¬´–¢–µ–º–∞¬ª ‚Äî —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ –±—Ä–∞—É–∑–µ—Ä–∞.</li>
            <li>–°–±—Ä–æ—Å –æ—á–∏—â–∞–µ—Ç –ø–æ–ª–µ, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è.</li>
          </ul>
        </div>
      </section>
    </main>

    <footer class="app-footer"><span>Made with ‚ù§Ô∏è for Telegram Web Apps</span></footer>
  </div>

  <script src="./app.js"></script>
  <script data-base="./">

    const THEME_KEY = 'ttt_theme_v1';
    function applyTheme(name, basePath){
      const link = document.getElementById('themeLink');
      const path = name === 'default' ? basePath + 'theme-default.css' : basePath + 'theme-' + name + '.css';
      link.setAttribute('href', path);
      try { localStorage.setItem(THEME_KEY, name); } catch(e){}
    }
    (function(){
      const scriptTag = document.currentScript;
      const basePath = (scriptTag && scriptTag.getAttribute('data-base')) || './';
      const saved = (localStorage.getItem('ttt_theme_v1') || 'default');
      applyTheme(saved, basePath);
      const sel = document.getElementById('themeSelect');
      if(sel){
        sel.value = saved;
        sel.addEventListener('change', (e)=> applyTheme(e.target.value, basePath));
      }
    })();

  </script>
</body>
</html>
